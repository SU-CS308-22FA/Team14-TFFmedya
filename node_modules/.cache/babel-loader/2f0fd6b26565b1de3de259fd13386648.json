{"ast":null,"code":"import React__default, { useState, useRef, useEffect, createRef, createElement } from 'react';\nvar styles = {\n  \"container\": \"_2EYYE\",\n  \"inner\": \"_3x3X6\",\n  \"answer\": \"_1gKL9\",\n  \"answer_hover\": \"_28NA5\",\n  \"answerContainer\": \"_wMDGK\"\n};\nfunction manageVote(results, item, index, refs) {\n  item.votes++;\n  countPercentage(results);\n  animateAnswers(index, results, refs);\n}\nfunction animateAnswers(index, results, refs) {\n  var answer = refs[index].current;\n  var oppositeIndex = index === 0 ? 1 : 0;\n  var anotherAnswer = refs[oppositeIndex].current;\n  var percentage = results[index].percentage;\n  if (answer && anotherAnswer && percentage) {\n    answer.animate([{\n      width: '50%',\n      easing: 'ease-out'\n    }, {\n      width: percentage + \"%\",\n      easing: 'ease-out'\n    }], 500);\n    anotherAnswer.animate([{\n      width: '50%',\n      easing: 'ease-out'\n    }, {\n      width: 100 - percentage + \"%\",\n      easing: 'ease-out'\n    }], 500);\n    answer.style.width = percentage + \"%\";\n    anotherAnswer.style.width = 100 - percentage + \"%\";\n    answer.animate([{\n      backgroundColor: 'white'\n    }, {\n      backgroundColor: '#efefef'\n    }], 200);\n    answer.style.backgroundColor = '#EFEFEF';\n    var height = answer.offsetHeight;\n    answer.style.padding = '0';\n    anotherAnswer.style.padding = '0';\n    answer.classList.remove(styles.answer_hover);\n    anotherAnswer.classList.remove(styles.answer_hover);\n    var inner = refs[0].current;\n    if (inner) inner.style.height = height + \"px\";\n  }\n}\nfunction countPercentage(results) {\n  var sum = results[0].votes + results[1].votes;\n  results[0].percentage = Math.round(results[0].votes / sum * 100);\n  results[1].percentage = Math.round(results[1].votes / sum * 100);\n}\nvar BinaryPoll = function BinaryPoll(_ref) {\n  var question = _ref.question,\n    results = _ref.results,\n    theme = _ref.theme,\n    onVote = _ref.onVote,\n    isVoted = _ref.isVoted;\n  var _useState = useState(false),\n    voted = _useState[0],\n    setVoted = _useState[1];\n  var answersContainer = useRef(null);\n  var answer0 = useRef(null);\n  var answer1 = useRef(null);\n  var allRefs = [answer0, answer1, answersContainer];\n  useEffect(function () {\n    if (isVoted) {\n      countPercentage(results);\n      animateAnswers(0, results, allRefs);\n      setVoted(true);\n    }\n  }, []);\n  return React__default.createElement(\"article\", {\n    className: styles.container,\n    style: {\n      alignItems: theme === null || theme === void 0 ? void 0 : theme.alignment\n    }\n  }, question && React__default.createElement(\"h1\", {\n    style: {\n      color: theme === null || theme === void 0 ? void 0 : theme.textColor\n    }\n  }, question), React__default.createElement(\"div\", {\n    ref: answersContainer,\n    className: styles.inner,\n    style: {\n      backgroundColor: theme === null || theme === void 0 ? void 0 : theme.backgroundColor\n    }\n  }, React__default.createElement(\"div\", {\n    ref: answer0,\n    role: 'button',\n    className: styles.answer_hover + ' ' + styles.answer,\n    id: 'binAnswer0',\n    onClick: function onClick() {\n      if (!voted) {\n        setVoted(true);\n        manageVote(results, results[0], 0, allRefs);\n        onVote === null || onVote === void 0 ? void 0 : onVote(results[0], results);\n      }\n    }\n  }, React__default.createElement(\"div\", {\n    className: styles.answerContainer\n  }, React__default.createElement(\"p\", {\n    style: {\n      color: theme === null || theme === void 0 ? void 0 : theme.leftColor\n    }\n  }, results[0].text), voted && React__default.createElement(\"span\", {\n    style: {\n      color: theme === null || theme === void 0 ? void 0 : theme.textColor\n    }\n  }, results[0].percentage, \"%\"))), React__default.createElement(\"div\", {\n    ref: answer1,\n    role: 'button',\n    className: styles.answer_hover + ' ' + styles.answer,\n    id: 'binAnswer1',\n    onClick: function onClick() {\n      if (!voted) {\n        setVoted(true);\n        manageVote(results, results[1], 1, allRefs);\n        onVote === null || onVote === void 0 ? void 0 : onVote(results[1], results);\n      }\n    }\n  }, React__default.createElement(\"div\", {\n    className: styles.answerContainer\n  }, React__default.createElement(\"p\", {\n    style: {\n      color: theme === null || theme === void 0 ? void 0 : theme.rightColor\n    }\n  }, results[1].text), voted && React__default.createElement(\"span\", {\n    style: {\n      color: theme === null || theme === void 0 ? void 0 : theme.textColor\n    }\n  }, results[1].percentage, \"%\")))));\n};\nvar styles$1 = {\n  \"container\": \"_1xGEd\",\n  \"answer\": \"_3gEzx\",\n  \"answer_hover\": \"_cCkxB\",\n  \"answerInner\": \"_is6ww\"\n};\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction manageVote$1(results, item, refs, theme) {\n  item.votes++;\n  countPercentage$1(results);\n  animateAnswers$1(results, refs, theme, item.id);\n}\nfunction animateAnswers$1(results, refs, theme, index, isVotedId) {\n  var answers = [];\n  var restOfAnswers = [];\n  for (var _iterator = _createForOfIteratorHelperLoose(results), _step; !(_step = _iterator()).done;) {\n    var result = _step.value;\n    if (index !== undefined) {\n      result.id !== index && restOfAnswers.push(result);\n    } else {\n      restOfAnswers = results;\n    }\n    var answerBuffer = refs.current[result.id].current;\n    answerBuffer && answers.push(answerBuffer);\n  }\n  if (index !== undefined) {\n    answers[index].animate([{\n      width: 0,\n      easing: 'ease-out',\n      backgroundColor: 'white'\n    }, {\n      width: results[index].percentage + \"%\",\n      easing: 'ease-out',\n      backgroundColor: \"\" + (theme === null || theme === void 0 ? void 0 : theme.mainColor)\n    }], 500);\n    answers[index].style.width = results[index].percentage + \"%\";\n    if (theme !== null && theme !== void 0 && theme.mainColor) answers[index].style.backgroundColor = theme === null || theme === void 0 ? void 0 : theme.mainColor;\n  }\n  for (var _iterator2 = _createForOfIteratorHelperLoose(restOfAnswers), _step2; !(_step2 = _iterator2()).done;) {\n    var ans = _step2.value;\n    answers[ans.id].animate([{\n      width: 0,\n      easing: 'ease-out',\n      backgroundColor: 'white'\n    }, {\n      width: ans.percentage + \"%\",\n      easing: 'ease-out',\n      backgroundColor: \"\" + (ans.id === isVotedId ? theme === null || theme === void 0 ? void 0 : theme.mainColor : '#efefef')\n    }], 500);\n    answers[ans.id].style.width = ans.percentage + \"%\";\n    answers[ans.id].style.backgroundColor = \"\" + (ans.id === isVotedId ? theme === null || theme === void 0 ? void 0 : theme.mainColor : '#efefef');\n  }\n}\nfunction countPercentage$1(results) {\n  var votes = [];\n  var sum = 0;\n  for (var _iterator3 = _createForOfIteratorHelperLoose(results), _step3; !(_step3 = _iterator3()).done;) {\n    var result = _step3.value;\n    votes.push(result.votes);\n    sum += result.votes;\n  }\n  for (var i = 0; i < votes.length; i++) {\n    results[i].percentage = sum === 0 ? 0 : Math.floor(votes[i] / sum * 100);\n  }\n}\nvar MultiplePoll = function MultiplePoll(_ref) {\n  var question = _ref.question,\n    results = _ref.results,\n    theme = _ref.theme,\n    onVote = _ref.onVote,\n    isVoted = _ref.isVoted,\n    isVotedId = _ref.isVotedId;\n  var _useState = useState(false),\n    voted = _useState[0],\n    setVoted = _useState[1];\n  var answerRefs = useRef(results.map(function () {\n    return createRef();\n  }));\n  useEffect(function () {\n    if (isVoted) {\n      countPercentage$1(results);\n      animateAnswers$1(results, answerRefs, theme, undefined, isVotedId);\n      setVoted(true);\n    }\n  }, []);\n  return React__default.createElement(\"article\", {\n    className: styles$1.container,\n    style: {\n      alignItems: theme === null || theme === void 0 ? void 0 : theme.alignment\n    }\n  }, question && React__default.createElement(\"h1\", {\n    style: {\n      color: theme === null || theme === void 0 ? void 0 : theme.textColor\n    }\n  }, question), results.map(function (result) {\n    return React__default.createElement(\"div\", {\n      key: result.id,\n      role: 'button',\n      id: 'mulAnswer' + result.id,\n      className: voted ? styles$1.answer : styles$1.answer_hover + ' ' + styles$1.answer,\n      style: {\n        backgroundColor: theme === null || theme === void 0 ? void 0 : theme.backgroundColor\n      },\n      onClick: function onClick() {\n        if (!voted) {\n          setVoted(true);\n          manageVote$1(results, result, answerRefs, theme);\n          onVote === null || onVote === void 0 ? void 0 : onVote(result, results);\n        }\n      }\n    }, React__default.createElement(\"div\", {\n      ref: answerRefs.current[result.id],\n      className: styles$1.answerInner\n    }, React__default.createElement(\"p\", {\n      style: {\n        color: theme === null || theme === void 0 ? void 0 : theme.textColor\n      }\n    }, result.text)), voted && React__default.createElement(\"span\", {\n      style: {\n        color: theme === null || theme === void 0 ? void 0 : theme.textColor\n      }\n    }, result.percentage, \"%\"));\n  }));\n};\nvar LeafPoll = function LeafPoll(_ref) {\n  var type = _ref.type,\n    question = _ref.question,\n    results = _ref.results,\n    theme = _ref.theme,\n    onVote = _ref.onVote,\n    _ref$isVoted = _ref.isVoted,\n    isVoted = _ref$isVoted === void 0 ? false : _ref$isVoted,\n    isVotedId = _ref.isVotedId;\n  return type === 'binary' ? createElement(BinaryPoll, {\n    question: question,\n    results: results,\n    theme: theme,\n    onVote: onVote,\n    isVoted: isVoted\n  }) : createElement(MultiplePoll, {\n    question: question,\n    results: results,\n    theme: theme,\n    onVote: onVote,\n    isVoted: isVoted,\n    isVotedId: isVotedId\n  });\n};\nexport { LeafPoll };","map":{"version":3,"mappings":"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","names":["manageVote","results","item","index","refs","votes","countPercentage","animateAnswers","answer","current","oppositeIndex","anotherAnswer","percentage","animate","width","easing","style","backgroundColor","height","offsetHeight","padding","classList","remove","styles","answer_hover","inner","sum","Math","round","BinaryPoll","question","theme","onVote","isVoted","useState","voted","setVoted","answersContainer","useRef","answer0","answer1","allRefs","useEffect","React","className","container","alignItems","alignment","color","textColor","ref","role","id","onClick","answerContainer","leftColor","text","rightColor","isVotedId","answers","restOfAnswers","result","undefined","push","answerBuffer","mainColor","ans","i","length","floor","MultiplePoll","answerRefs","map","createRef","key","answerInner","LeafPoll","type","_ref$isVoted"],"sources":["C:\\Users\\Alp\\Desktop\\CS_308\\Deneme\\tffmedya\\node_modules\\react-leaf-polls\\src\\components\\BinaryPoll\\utils.ts","C:\\Users\\Alp\\Desktop\\CS_308\\Deneme\\tffmedya\\node_modules\\react-leaf-polls\\src\\components\\BinaryPoll\\BinaryPoll.tsx","C:\\Users\\Alp\\Desktop\\CS_308\\Deneme\\tffmedya\\node_modules\\react-leaf-polls\\src\\components\\MultiplePoll\\utils.ts","C:\\Users\\Alp\\Desktop\\CS_308\\Deneme\\tffmedya\\node_modules\\react-leaf-polls\\src\\components\\MultiplePoll\\MultiplePoll.tsx","C:\\Users\\Alp\\Desktop\\CS_308\\Deneme\\tffmedya\\node_modules\\react-leaf-polls\\src\\index.tsx"],"sourcesContent":["import { RefObject } from 'react'\nimport { Result } from '../../types/result'\nimport styles from './BinaryPoll.module.css'\n\nfunction manageVote(\n  results: Result[],\n  item: Result,\n  index: number,\n  refs: RefObject<HTMLDivElement>[]\n): void {\n  item.votes++\n  countPercentage(results)\n  animateAnswers(index, results, refs)\n}\n\nfunction animateAnswers(\n  index: number,\n  results: Result[],\n  refs: RefObject<HTMLDivElement>[]\n): void {\n  const answer: HTMLElement | null = refs[index].current\n  // get not clicked answer element\n  const oppositeIndex: number = index === 0 ? 1 : 0\n  const anotherAnswer: HTMLElement | null = refs[oppositeIndex].current\n  const percentage: number | undefined = results[index].percentage\n\n  if (answer && anotherAnswer && percentage) {\n    // animate background width\n    answer.animate(\n      [\n        { width: '50%', easing: 'ease-out' },\n        { width: `${percentage}%`, easing: 'ease-out' }\n      ],\n      500\n    )\n    anotherAnswer.animate(\n      [\n        { width: '50%', easing: 'ease-out' },\n        { width: `${100 - percentage}%`, easing: 'ease-out' }\n      ],\n      500\n    )\n    answer.style.width = `${percentage}%`\n    anotherAnswer.style.width = `${100 - percentage}%`\n\n    // animate background color\n    answer.animate(\n      [{ backgroundColor: 'white' }, { backgroundColor: '#efefef' }],\n      200\n    )\n    answer.style.backgroundColor = '#EFEFEF'\n\n    // set height to the same value before and after the vote\n    const height: number = answer.offsetHeight\n    answer.style.padding = '0'\n    anotherAnswer.style.padding = '0'\n\n    // disable hovering after the animation\n    answer.classList.remove(styles.answer_hover)\n    anotherAnswer.classList.remove(styles.answer_hover)\n\n    const inner: HTMLElement | null = refs[0].current\n    if (inner) inner.style.height = `${height}px`\n  }\n}\n\nfunction countPercentage(results: Result[]): void {\n  const sum: number = results[0].votes + results[1].votes\n\n  results[0].percentage = Math.round((results[0].votes / sum) * 100)\n  results[1].percentage = Math.round((results[1].votes / sum) * 100)\n}\n\nexport { manageVote, countPercentage, animateAnswers }\n","import React, { useState, useEffect, useRef, RefObject } from 'react'\nimport styles from './BinaryPoll.module.css'\nimport { manageVote, countPercentage, animateAnswers } from './utils'\nimport type { Result } from '../../types/result'\nimport type { Theme } from '../../types/theme'\n\n// move to types if iit will be the same as MultiplePollProps\ninterface BinaryPollProps {\n  question?: string\n  results: Result[]\n  theme?: Theme\n  isVoted?: boolean\n  onVote?(item: Result, results: Result[]): void\n}\n\nconst BinaryPoll = ({\n  question,\n  results,\n  theme,\n  onVote,\n  isVoted\n}: BinaryPollProps) => {\n  const [voted, setVoted] = useState<boolean>(false)\n  const answersContainer = useRef<HTMLDivElement>(null)\n  const answer0 = useRef<HTMLDivElement>(null)\n  const answer1 = useRef<HTMLDivElement>(null)\n  const allRefs: RefObject<HTMLDivElement>[] = [\n    answer0,\n    answer1,\n    answersContainer\n  ]\n\n  useEffect(() => {\n    if (isVoted) {\n      countPercentage(results)\n      animateAnswers(0, results, allRefs)\n      setVoted(true)\n    }\n  }, [])\n\n  return (\n    <article\n      className={styles.container}\n      style={{ alignItems: theme?.alignment }}\n    >\n      {question && <h1 style={{ color: theme?.textColor }}>{question}</h1>}\n\n      <div\n        ref={answersContainer}\n        className={styles.inner}\n        style={{ backgroundColor: theme?.backgroundColor }}\n      >\n        <div\n          ref={answer0}\n          role='button'\n          className={styles.answer_hover + ' ' + styles.answer}\n          id='binAnswer0'\n          onClick={() => {\n            if (!voted) {\n              setVoted(true)\n              manageVote(results, results[0], 0, allRefs)\n              onVote?.(results[0], results)\n            }\n          }}\n        >\n          <div className={styles.answerContainer}>\n            <p style={{ color: theme?.leftColor }}>{results[0].text}</p>\n            {voted && (\n              <span style={{ color: theme?.textColor }}>\n                {results[0].percentage}%\n              </span>\n            )}\n          </div>\n        </div>\n        <div\n          ref={answer1}\n          role='button'\n          className={styles.answer_hover + ' ' + styles.answer}\n          id='binAnswer1'\n          onClick={() => {\n            if (!voted) {\n              setVoted(true)\n              manageVote(results, results[1], 1, allRefs)\n              onVote?.(results[1], results)\n            }\n          }}\n        >\n          <div className={styles.answerContainer}>\n            <p style={{ color: theme?.rightColor }}>{results[1].text}</p>\n            {voted && (\n              <span style={{ color: theme?.textColor }}>\n                {results[1].percentage}%\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n    </article>\n  )\n}\n\nexport { BinaryPoll, BinaryPollProps }\n","import { RefObject, MutableRefObject } from 'react'\nimport { Result } from '../../types/result'\nimport { Theme } from '../../types/theme'\n\nfunction manageVote(\n  results: Result[],\n  item: Result,\n  refs: MutableRefObject<RefObject<HTMLDivElement>[]>,\n  theme?: Theme\n): void {\n  item.votes++\n  countPercentage(results)\n  animateAnswers(results, refs, theme, item.id)\n}\n\nfunction animateAnswers(\n  results: Result[],\n  refs: MutableRefObject<RefObject<HTMLDivElement>[]>,\n  theme?: Theme,\n  index?: number,\n  isVotedId?: number\n): void {\n  const answers: HTMLElement[] = []\n  let restOfAnswers: Result[] = []\n\n  for (const result of results) {\n    if (index !== undefined) {\n      result.id !== index && restOfAnswers.push(result)\n    } else {\n      restOfAnswers = results\n    }\n    const answerBuffer: HTMLElement | null = refs.current[result.id].current\n    answerBuffer && answers.push(answerBuffer)\n  }\n\n  if (index !== undefined) {\n    // animate clicked answer\n    answers[index].animate(\n      [\n        { width: 0, easing: 'ease-out', backgroundColor: 'white' },\n        {\n          width: `${results[index].percentage}%`,\n          easing: 'ease-out',\n          backgroundColor: `${theme?.mainColor}`\n        }\n      ],\n      500\n    )\n    answers[index].style.width = `${results[index].percentage}%`\n    if (theme?.mainColor)\n      answers[index].style.backgroundColor = theme?.mainColor\n  }\n\n  // animate rest of answers (not clicked)\n  for (const ans of restOfAnswers) {\n    answers[ans.id].animate(\n      [\n        { width: 0, easing: 'ease-out', backgroundColor: 'white' },\n        {\n          width: `${ans.percentage}%`,\n          easing: 'ease-out',\n          backgroundColor: `${\n            ans.id === isVotedId ? theme?.mainColor : '#efefef'\n          }`\n        }\n      ],\n      500\n    )\n    answers[ans.id].style.width = `${ans.percentage}%`\n    answers[ans.id].style.backgroundColor = `${\n      ans.id === isVotedId ? theme?.mainColor : '#efefef'\n    }`\n  }\n}\n\nfunction countPercentage(results: Result[]): void {\n  const votes: number[] = []\n  let sum: number = 0\n\n  for (const result of results) {\n    votes.push(result.votes)\n    sum += result.votes\n  }\n\n  for (let i = 0; i < votes.length; i++) {\n    results[i].percentage = sum === 0 ? 0 : Math.floor((votes[i] / sum) * 100)\n  }\n}\n\nexport { manageVote, countPercentage, animateAnswers }\n","import React, { useState, useEffect, useRef, createRef, RefObject } from 'react'\r\nimport styles from './MultiplePoll.module.css'\r\nimport { manageVote, countPercentage, animateAnswers } from './utils'\r\n//import { manageVote } from './utils'\r\nimport type { Result } from '../../types/result'\r\nimport type { Theme } from '../../types/theme'\r\n\r\ninterface MultiplePollProps {\r\n  question?: string\r\n  results: Result[]\r\n  theme?: Theme\r\n  isVoted?: boolean\r\n  isVotedId?: number\r\n  onVote?(item: Result, results: Result[]): void\r\n}\r\n\r\nconst MultiplePoll = ({\r\n  question,\r\n  results,\r\n  theme,\r\n  onVote,\r\n  isVoted,\r\n  isVotedId,\r\n}: MultiplePollProps) => {\r\n  const [voted, setVoted] = useState<boolean>(false)\r\n  const answerRefs = useRef<RefObject<HTMLDivElement>[]>(\r\n    results.map(() => createRef<HTMLDivElement>())\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (isVoted) {\r\n      countPercentage(results)\r\n      animateAnswers(results, answerRefs, theme, undefined, isVotedId)\r\n      setVoted(true)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <article\r\n      className={styles.container}\r\n      style={{ alignItems: theme?.alignment }}\r\n    >\r\n      {question && <h1 style={{ color: theme?.textColor }}>{question}</h1>}\r\n\r\n      {results.map((result) => (\r\n        <div\r\n          key={result.id}\r\n          role='button'\r\n          id={'mulAnswer' + result.id}\r\n          className={\r\n            voted ? styles.answer : styles.answer_hover + ' ' + styles.answer\r\n          }\r\n          style={{\r\n            backgroundColor: theme?.backgroundColor\r\n          }}\r\n          onClick={() => {\r\n            if (!voted) {\r\n              setVoted(true)\r\n              manageVote(results, result, answerRefs, theme)\r\n              onVote?.(result, results)\r\n            }\r\n          }}\r\n        >\r\n          <div\r\n            ref={answerRefs.current[result.id]}\r\n            className={styles.answerInner}\r\n          >\r\n            <p style={{ color: theme?.textColor }}>{result.text}</p>\r\n          </div>\r\n          {voted && (\r\n            <span style={{ color: theme?.textColor }}>\r\n              {result.percentage}%\r\n            </span>\r\n          )}\r\n        </div>\r\n      ))}\r\n    </article>\r\n  )\r\n}\r\n\r\nexport { MultiplePoll, MultiplePollProps }\r\n","import * as React from 'react'\nimport { BinaryPoll, BinaryPollProps } from './components/BinaryPoll/BinaryPoll'\nimport {\n  MultiplePoll,\n  MultiplePollProps\n} from './components/MultiplePoll/MultiplePoll'\nimport { Result } from './types/result'\n\ninterface Props extends BinaryPollProps, MultiplePollProps {\n  type: 'binary' | 'multiple'\n}\n\nconst LeafPoll = ({\n  type,\n  question,\n  results,\n  theme,\n  onVote,\n  isVoted = false,\n  isVotedId\n}: Props) => {\n  return type === 'binary' ? (\n    <BinaryPoll\n      question={question}\n      results={results}\n      theme={theme}\n      onVote={onVote}\n      isVoted={isVoted}\n    />\n  ) : (\n    <MultiplePoll\n      question={question}\n      results={results}\n      theme={theme}\n      onVote={onVote}\n      isVoted={isVoted}\n      isVotedId={isVotedId}\n    />\n  )\n}\n\nexport { LeafPoll, Result }\n"]},"metadata":{},"sourceType":"module"}